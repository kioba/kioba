<!DOCTYPE html>
<html lang="en-gb">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="theme-color" content="#282828" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap');

   
   
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

   
  ul[class],
  ol[class] {
    padding: 0;
  }

   
  body,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  p,
  ul[class],
  ol[class],
  li,
  figure,
  figcaption,
  blockquote,
  dl,
  dd {
    margin: 0;
    padding: 0;
  }

   
  body {
    min-height: 100vh;
    scroll-behavior: smooth;
    text-rendering: optimizeSpeed;
    line-height: 1.5;
  }

   
  ul[class],
  ol[class] {
    list-style: none;
  }

   
  a:not([class]) {
    text-decoration-skip-ink: auto;
  }

   
  img {
    max-width: 100%;
    display: block;
  }

   
  article>*+* {
    margin-top: 1em;
  }

   
  input,
  button,
  textarea,
  select {
    font: inherit;
  }

   
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }






  *,
  *::before,
  *::after {
    font-family: 'Fira Code', monospace;
    letter-spacing: -0.06em;
  }

   
  @media (prefers-color-scheme: dark) {
    img {
      filter: brightness(.9) contrast(1.2);
    }
  }

  :root {
    --background-color: #282828;
    --footer-color: #303030;
    --primary: #fc3e44;
    --tags: #3d4555;
    --text-color: #dadee4;
    --tags-color: #d2d2d2;
    --date_color: #e5e9f093;
    --header-background: #282828;
    --header-title: #fc3e44;
  }

  body {
    color: var(--text-color);
    background-color: var(--background-color);
  }

  .container {
    display: flexbox;
  }

  .row {
    display: inline-flex;
  }

  #content {
    max-width: 820px;
    margin: 0 auto;
    padding: 30px;
  }

  .header {
    margin: 0em auto;
    margin-top: 4em;
    margin-bottom: 1em;
    background-color: var(--header-background);
    text-decoration: none;
    text-align: center;
    line-height: 1.2;
  }

  .header>a {
    color: var(--header-title);
    text-decoration: none !important;
  }

  #date {
    color: var(--date_color);
  }

  .row.tags {
    flex-wrap: wrap;

    margin: -12px 0 0 -12px;
    width: calc(100% + 12px);
  }

  .row.tags>* {
    margin: 12px 0 0 12px;
  }

  .row.tags div {
    padding: 4px 10px;

    border-radius: 8px;
    background-color: var(--tags);
  }

  .title {
    color: var(--primary);
    font-weight: 600;
    line-height: 1.2;
    font-size: 26px;
    padding-right: 16px;
    margin-bottom: 18px;
  }

  .title a {
    letter-spacing: .2em;
    color: var(--primary);
    text-decoration: none !important;
  }

  #read_more a {
    color: var(--text-color);
    font-size: 18px;
    text-decoration: none !important;
  }

  .summary {
    margin: 30px 0px;
    font-size: 18px;
  }

  .separator {
    margin: 40px 10px;
    height: .1rem;
    background-color: grey;
    border-radius: 16px;
  }

  .separator:last-child {
    display: none;
  }

  .tags_link {
    text-decoration: none !important;
    color: var(--tags-color);
  }




  .post .post-content {
    padding-top: 2rem;
    font-size: 18px;
  }

  .post-content>h1 {
    margin-top: 56px;
    margin-bottom: 24px;
    color: white;
  }

  .post-content>h1::before {
    content: "# ";
    color: var(--primary);
  }

  .post-content>h2 {
    margin-top: 56px;
    margin-bottom: 24px;
    color: white;
  }

  .post-content>h2::before {
    content: "# ";
    color: var(--primary);
  }

  .post-content>h3 {
    margin-top: 56px;
    margin-bottom: 24px;
    color: white;
  }

  .post-content>h3::before {
    content: "# ";
    color: var(--primary);
  }

  .post-content>h4 {
    margin-top: 56px;
    margin-bottom: 24px;
    color: white;
  }

  .post-content>h4::before {
    content: "# ";
    color: var(--primary);
  }

  .post-content>h5 {
    margin-top: 56px;
    margin-bottom: 24px;
    color: white;
  }

  .post-content>h5::before {
    content: "# ";
    color: var(--primary);
  }

  .post-content>h6 {
    margin-top: 56px;
    margin-bottom: 24px;
    color: white;
  }

  .post-content>h6::before {
    content: "# ";
    color: var(--primary);
  }

  .post-content>p>img {
    margin: 1.5em auto;
    width: 95%;
  }

  .post-content a,
  .summary a {
    color: var(--primary);
    filter: brightness(1.4);
  }

  .post-content table {
    color: var(--primary);
    margin: 1em auto;
    border-spacing: 1em;
    border: 2px dashed var(--primary);
  }

  .highlight {
    background-color: #fc3e44;
  }




  #footer {
    background-color: var(--footer-color);
    color: var(--header-title);
    text-align: center;
    font-weight: 600;
    padding: 48px 0px;
  }
</style>
</head>

<body>
    <div>
        <div class="header">
  <a href="https://kioba.dev/">
    <pre>
██╗  ██╗██╗ ██████╗ ██████╗  █████╗ 
██║ ██╔╝██║██╔═══██╗██╔══██╗██╔══██╗
█████╔╝ ██║██║   ██║██████╔╝███████║
██╔═██╗ ██║██║   ██║██╔══██╗██╔══██║
██║  ██╗██║╚██████╔╝██████╔╝██║  ██║
╚═╝  ╚═╝╚═╝ ╚═════╝ ╚═════╝ ╚═╝  ╚═╝
</pre>
  </a>
</div>

        <div id="content">
            
<div class="post">
  <div class="container">
    <div class="row">
      <div id="date">Published on 11 Apr 2021</div>
    </div>
    <div class="title">
      <h2>
        Capt Compass E1 - cleaning up the codebase
      </h2>
    </div>
    
    <div class="row tags">
      
      <a class="tags_link" href="https://kioba.dev/tags/flutter/">
        <div>
          flutter
        </div>
      </a>
      
      <a class="tags_link" href="https://kioba.dev/tags/devlog/">
        <div>
          devlog
        </div>
      </a>
      
      <a class="tags_link" href="https://kioba.dev/tags/capt_compass/">
        <div>
          capt_compass
        </div>
      </a>
      
    </div>
    

    <div class="post-content"><p>A lot has happened since the latest devlog. Almost a year passed without an update. The pandemic and switching job kept my focus away from my side project, but I am finally back and keep pushing the limits. No new or left behind the project as promised! So let&rsquo;s just jump in the code see what needs to change under the hood!</p>
<!-- raw HTML omitted -->
<h2 id="initial-mistakes">initial mistakes</h2>
<p>The initial code started without knowing exactly which state management fits my needs better, to be honest, I was experimenting a lot. So much so that it felt I was wasting too much time discovering the best solution. I understood the existing state management in the community better but things were not progressing and the app flooded with costume solutions. Each screen in my small app had either custom state management or handling the database in the wrong places. Something had to be done and maybe this is just the right time to do so.</p>
<h2 id="removing-dead-weight">removing dead weight</h2>
<p>Different state management implementations for each screen troubled me for a long time. I was not confident enough to open a screen and know instantly how I can modify it. I always had to think before coding but they never made big challenges enough to modify them so I just kept them around.</p>
<p>With Flutter 2 on the horizon and null safety Dart, it became clear that I have to get rid of these experimentations otherwise I have to manually upgrade them for null safety. To be able to do that I should have to read the docs and understand the introduction of null safety for each lib. After a few initial try, I decided that there is not much benefit of wasting my time in docs but I would rather get rid of them while I am not committed more.</p>
<h2 id="removing-bloc-and-rx">removing Bloc and Rx</h2>
<p><code>Bloc</code> lib was on my list to purge from the codebase. It might be an elegant solution but did not enjoy working with the lib. It was just too much boilerplate for even the smallest code change. While some of the stuff could be eliminated with <code>Freezed</code> I decided to simply ditch the lib.</p>
<p>How hard could it be to get rid of state management? Good thing you ask, it was a pretty much okay experience, the hardest part was getting the right providers for the correct places and fighting with nullability. Overall I was quite pleased how much code I was able to get rid of just removing the <code>bloc</code> library.</p>
<p><code>RxDart</code> also could be eliminated from the codebase replaced most of the places with <code>Future</code>, only a few parts of the API required <code>Stream</code> dependency which I am super pleased with.</p>
<h2 id="summary">summary</h2>
<p>Good progress on both the codebase and now I feel confident to change the codebase on every screen without finding an unexpected pattern that I have to think about how to change.</p>
</div>
  </div>
</div>

        </div>

        <div id="footer">
  Made by Kioba.
</div>

    </div>
</body>

</html>